# slurm.conf file generated by configurator.html.
# Put this file on all nodes of your cluster.
# See the slurm.conf man page for more information.
#
<% @slurmctld_hosts.each do |host| %>
SlurmctldHost=<%= host %>
<% end %>

AuthType=auth/munge
CryptoType=crypto/munge
DisableRootJobs=<%= @disable_root_jobs %>
EnforcePartLimits=<%= @enforce_part_limits %>
FirstJobId=<%= @first_job_id %>
MaxJobId=<%= @max_job_id %>
GroupUpdateForce=<%= @group_update_force %>
GroupUpdateTime=<%= @group_update_time %>
JobFileAppend=<%= @job_file_append %>
JobRequeue=<%= @job_requeue %>
JobSubmitPlugins=<%= @job_submit_plugins %>
KillOnBadExit=<%= @kill_on_bad_exit %>
LaunchType=<%= @launch_type %>
#Licenses=foo*4,bar
MailProg=<%= @mail_prog %>
MaxJobCount=<%= @max_job_count %>
MaxStepCount=<%= @max_step_count %>
MaxTasksPerNode=<%= @max_tasks_per_node %>
MpiDefault=<%= @mpi_default %>
#MpiParams=ports=#-#
#PluginDir=
#PlugStackConfig=
PrivateData=<%= @private_data %>
ProctrackType=<%= @proctrack_type %>
#Prolog=
#PrologFlags=
#PrologSlurmctld=
PropagatePrioProcess=<%= @propogate_prio_process %>
#PropagateResourceLimits=
#PropagateResourceLimitsExcept=
#RebootProgram=
ReturnToService=<%= @return_to_service %>
#SallocDefaultCommand=
SlurmctldPidFile=<%= @slurmctld_pidfile %>
SlurmctldPort=<%= @slurmctld_port %>
SlurmdPidFile=<%= @slurmd_pidfile %>
SlurmdPort=<%= @slurmd_port %>
SlurmdSpoolDir=<%= @slurmd_spool_dir %>
SlurmUser=<%= @slurm_user %>
#SlurmdUser=root
#SrunEpilog=
#SrunProlog=
StateSaveLocation=/var/spool
SwitchType=switch/none
#TaskEpilog=
TaskPlugin=<%= @task_plugin %>
TaskPluginParam=<%= @task_plugin_param %>
#TaskProlog=
#TopologyPlugin=topology/tree
#TmpFS=/tmp
#TrackWCKey=no
#TreeWidth=
#UnkillableStepProgram=
#UsePAM=0
#
#
# TIMERS
BatchStartTimeout=<%= @batch_start_timeout %>
CompleteWait=<%= @complete_wait %>
#EpilogMsgTime=2000
GetEnvTimeout=<%= @get_env_timeout %>
<% if defined?(@health_check_interval) -%>
HealthCheckInterval=<%= @health_check_interval %>
<% end -%>
<% if defined?(@health_check_program) -%>
HealthCheckProgram=<%= @health_check_program %>
<% end -%>
InactiveLimit=<%= @inactive_limit %>
KillWait=<%= @kill_wait %>
MessageTimeout=<%= @message_timeout %>
ResvOverRun=<%= @resv_over_run %>
MinJobAge=<%= @min_job_age %>
OverTimeLimit=<%= @over_time_limit %>
SlurmctldTimeout=<%= @slurmctld_timeout %>
SlurmdTimeout=<%= @slurmd_timeout %>
UnkillableStepTimeout=<%= @unkillable_step_timeout %>
#VSizeFactor=0
Waittime=<%= @wait_time %>
#
#
# SCHEDULING
DefMemPerCPU=<%= @def_mem_per_cpu %>
MaxMemPerCPU=<%= @max_mem_per_cpu %>
SchedulerTimeSlice=<%= @scheduler_time_slice %>
SchedulerType=<%= @scheduler_type %>
SelectType=<%= @select_type %>
SelectTypeParameters=<%= @select_type_parameters %>
#
#
# JOB PRIORITY
#PriorityFlags=
#PriorityType=priority/basic
#PriorityDecayHalfLife=
#PriorityCalcPeriod=
#PriorityFavorSmall=
#PriorityMaxAge=
#PriorityUsageResetPeriod=
#PriorityWeightAge=
#PriorityWeightFairshare=
#PriorityWeightJobSize=
#PriorityWeightPartition=
#PriorityWeightQOS=
#
#
# LOGGING AND ACCOUNTING
#AccountingStorageEnforce=0
AccountingStorageHost=<%= @db_host %>
#AccountingStorageLoc=
#AccountingStoragePass=
#AccountingStoragePort=
AccountingStorageType=accounting_storage/slurmdbd
#AccountingStorageUser=
AccountingStoreJobComment=<%= @accounting_job_store_comment %>
ClusterName=<%= @cluster_name %>
#DebugFlags=
#JobCompHost=
#JobCompLoc=
#JobCompPass=
#JobCompPort=
JobCompType=<%= @job_comp_type %>
#JobCompUser=
#JobContainerType=<%= @job_container_type %>
JobAcctGatherFrequency=<%= @job_acct_gather_frequency %>
JobAcctGatherType=<%= @job_acct_gather_type %>
SlurmctldDebug=<%= @slurmctl_loglevel %>
#SlurmctldLogFile=
SlurmdDebug=<%= @slurmd_loglevel %>
#SlurmdLogFile=
#SlurmSchedLogFile=
#SlurmSchedLogLevel=
#
#
# POWER SAVE SUPPORT FOR IDLE NODES (optional)
#SuspendProgram=
#ResumeProgram=
#SuspendTimeout=
#ResumeTimeout=
#ResumeRate=
#SuspendExcNodes=
#SuspendExcParts=
#SuspendRate=
#SuspendTime=
#
#
# COMPUTE NODES
<% @compute_nodes.each do |name, node| -%>
NodeName=<%= name -%> <% node.each do |key, value| -%><%= key -%>=<%= value -%> <% end %>
<% end -%>

# Partitions
<% @partitions.each do |name, partition| -%>
PartitionName=<%= name -%> <% partition.each do |key, value| -%><%= key -%>=<%= value -%> <% end %>
<% end -%>
