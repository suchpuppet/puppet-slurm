---
slurm::installation_type: 'monolithic'

# Munge
slurm::manage_munge: true
slurm::munge_key_source: 'puppet:///modules/slurm/etc/munge/munge.key' # Use your own key, not this one

# Database
slurm::manage_db: true
slurm::db_user: 'slurm'
slurm::db_password: 'please-use-your-own-password'
slurm::db_root_password: 'please-use-your-own-password'
slurm::db_host: 'localhost'
slurm::db_override_options:
  mysqld:
    'log-error': '/var/log/mysql/mariadb.log'
    'pid-file': '/var/run/mysqld/mysqld.pid'
    'innodb_buffer_pool_size': '1024M'
    'innodb_log_file_size': '1024M'
    'innodb_lock_wait_timeout': '900'
  mysqld_safe:
    'log-error': '/var/log/mysql/mariadb.log'

# Config file settings
slurm::disable_root_jobs: 'NO'
slurm::enforce_part_limits: 'NO'
slurm::first_job_id: 1
slurm::max_job_id: 999999
slurm::group_update_force: 0
slurm::group_update_time: 600
slurm::job_file_append: 0
slurm::job_requeue: 1
slurm::job_submit_plugins: 1
slurm::kill_on_bad_exit: 0
slurm::launch_type: 'launch/slurm'
slurm::mail_prog: '/bin/mail'
slurm::max_job_count: 5000
slurm::max_step_count: 40000
slurm::max_tasks_per_node: 128
slurm::mpi_default: 'none'
slurm::private_data: 'jobs'
slurm::proctrack_type: 'proctrack/cgroup'
slurm::propogate_prio_process: 0
slurm::return_to_service: 1
slurm::slurmctld_pidfile: '/var/run/slurmctld.pid'
slurm::slurmctld_port: 6817
slurm::slurmd_pidfile: '/var/run/slurmd.pid'
slurm::slurmd_port: 6818
slurm::slurmd_spool_dir: '/var/spool/slurmd'
slurm::slurmdbd_pidfile: '/var/run/slurmdbd.pid'
slurm::slurm_user: 'slurm'
slurm::task_plugin: 'task/affinity'
slurm::task_plugin_param: 'Sched'

# Timers
slurm::batch_start_timeout: 10
slurm::complete_wait: 0
slurm::get_env_timeout: 2
slurm::inactive_limit: 0
slurm::kill_wait: 30
slurm::message_timeout: 10
slurm::resv_over_run: 0
slurm::min_job_age: 300
slurm::over_time_limit: 0
slurm::slurmctld_timeout: 120
slurm::slurmd_timeout: 300
slurm::unkillable_step_timeout: 60
slurm::wait_time: 0

# Scheduling
slurm::def_mem_per_cpu: 0
slurm::max_mem_per_cpu: 0
slurm::scheduler_time_slice: 30
slurm::scheduler_type: 'sched/backfill'
slurm::select_type: 'select/cons_res'
slurm::select_type_parameters: 'CR_Core'

# Logging & Accounting
slurm::accounting_job_store_comment: 'YES'
slurm::cluster_name: 'slurm_cluster'
slurm::job_comp_type: 'jobcomp/none'
slurm::job_container_type: 'job_container/none'
slurm::job_acct_gather_frequency: 30
slurm::job_acct_gather_type: 'jobacct_gather/none'
slurm::slurmctl_loglevel: 'info'
slurm::slurmd_loglevel: 'info'
slurm::slurmdbd_loglevel: 'info'

# Compute nodes
slurm::compute_nodes:
  "%{::fqdn}":
    CPUs: "%{::processorcount}"
    RealMemory: "%{::memorysize_mb}"
    State: UNKNOWN

# Partitions
slurm::partitions:
  default:
    Nodes: 'ALL'
    Default: 'YES'
    MaxTime: 'INFINITE'
    State: 'UP'
